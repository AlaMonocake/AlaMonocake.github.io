<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Holy Grail War Simulator</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="simulation.js"></script>
    <script defer src="randomizer.js"></script>
</head>
<body>
    <header>
        <h1>HOLY GRAIL WAR SIMULATOR</h1>
    </header>
    
    <main>
        <h2 id="day-counter">Day 1</h2>
        <div id="event-log" class="event-container">
            <!-- Events will be inserted here by JavaScript -->
        </div>
        
        <button id="next-day">Proceed to Next Day</button>
    </main>
     <!-- The script to collect participants follows -->
     <script>
        console.log("Raw localStorage on load:", localStorage.getItem("participants"));
        function loadParticipants() {
    const storedData = localStorage.getItem("participants");
    console.log("Loaded raw data from localStorage:", storedData);

    if (!storedData) {
        console.error("No participants found in localStorage.");
        document.getElementById("event-log").innerHTML = "<p>No participants found. Please start from the index page.</p>";
        return [];
    }

    let participants;
    try {
        participants = JSON.parse(storedData);
    } catch (e) {
        console.error("Error parsing participants JSON:", e);
        document.getElementById("event-log").innerHTML = "<p>Failed to load participants data. Please re-enter data.</p>";
        return [];
    }

    if (!Array.isArray(participants) || participants.length === 0) {
        console.error("Participants data is empty or invalid.");
        document.getElementById("event-log").innerHTML = "<p>No valid participants found. Please start from the index page.</p>";
        return [];
    }

    console.log("Loaded Participants:", participants);
    return participants;
}
window.addEventListener("DOMContentLoaded", () => {
    const participants = loadParticipants();
    if (participants.length > 0) {
        generateTestEvents(participants);
    }
});
//load day 1 events
const participants = loadParticipants();
generateDayOneEvents(participants);

</script>
        </script>
</body>
</html>
